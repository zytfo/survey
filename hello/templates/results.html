{% extends "base_alternative.html" %}

{% block content %}
<script src="/static/highcharts/code/highcharts.js"></script>
<script src="/static/highcharts/code/modules/exporting.js"></script>

<div class="text-center">
  <div class="container">
      <h1>{{ locale.survey_results }}</h1>
      <div id="containerq1" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>
      <div id="containerq2" style="min-width: 310px; max-width: 800px; height: 200px; margin: 0 auto"></div>
      <div id="containerq3" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>
      <div id="containerq4" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>
      <div class="container" style="position:relative;text-align:center;">
      <div class="text-left">
      {% for r in responses %}
        <h3> {{ locale.survey_results_response }} {{ r.id }} </h3>
        <p> <b>{{ locale.survey_questions.0 }}</b> <p>{{ r.q1 }}</p> </p>
        <p> <b>{{ locale.survey_questions.1 }}</b> <p>{{ r.q2 }}</p> </p>
        <p> <b>{{ locale.survey_questions.2 }}</b> <p>{{ r.q3 }}</p> </p>
        <p> <b>{{ locale.survey_questions.3 }}</b> <p>{{ r.q4 }}</p> </p>
        <p> <b>{{ locale.survey_questions.4 }}</b> <p>{{ r.q5 }}</p> </p>
      {% endfor %}
    </div>
    </div>
    </div>
</div>

<script type="text/javascript">
Highcharts.chart('containerq1', {
    chart: {
        type: 'bar'
    },
    title: {
        text: '{{ locale.survey_questions.0 }}'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: {{ graphs.q1_names|safe }},
        title: {
            text: null
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: '{{ locale.charts_question_1_yAxis }}',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        }
    },
    tooltip: {
        valueSuffix: ' {{ locale.charts_valueSuffix }}'
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 80,
        floating: true,
        borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
        name: 'Survey',
        data: {{ graphs.q1_values|safe }}
    }]
});
</script>

<script type="text/javascript">
Highcharts.chart('containerq2', {
    chart: {
        type: 'bar'
    },
    title: {
        text: '{{ locale.survey_questions.1 }}'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: '{{ locale.charts_question_2_xAxis }}',
        title: {
            text: null
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: '{{ locale.charts_question_2_yAxis }}',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        },
        max: 10
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 80,
        floating: true,
        borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
        name: 'Survey',
        data: {{ graphs.q2|safe }}
    }]
});
    </script>

<script type="text/javascript">
$(document).ready(function () {
    Highcharts.chart('containerq3', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: '{{ locale.survey_questions.2|safe }}'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            name: '{{ locale.charts_valueSuffix }}',
            colorByPoint: true,
            data: {{ graphs.q3|safe }}
        }]
    });
});
</script>

<script type="text/javascript">
$(document).ready(function () {
    Highcharts.chart('containerq4', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: '{{ locale.survey_questions.3|safe }}'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            name: '{{ locale.charts_valueSuffix }}',
            colorByPoint: true,
            data: {{ graphs.q4|safe }}
        }]
    });
});
</script>
{% endblock %}


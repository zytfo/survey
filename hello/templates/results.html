{% extends "base_alternative.html" %}

{% block content %}
<script src="/static/highcharts/code/highcharts.js"></script>
<script src="/static/highcharts/code/modules/exporting.js"></script>

<style type="text/css">
.graphcontainer{
    display: flex;
}
.flex-item{
    flex-grow: 1;
}
.card {
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;
    width: 80%;
    margin-left: 10%;
}

.card:hover {
    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
}

.response {
    padding: 2px 16px;
}
</style>

<div class="text-center">
  <div class="container">
      <h1>{{ locale.survey_results }}</h1>
      <h2><a name="graphs">{{ locale.survey_results_graphs }}</a></h2>
      <div class="graphcontainer">
        <div class="fixed" id="containerq1" style="width: 50%; height: 400px; margin: 0 auto"></div>
        <!--<div class="fixed" id="containerq6" style="width: 50%; height: 400px; margin: 0 auto"></div>-->
        <div class="flex-item" id="containerq2" style="width: 50%; height: 200px; margin: 0 auto"></div>
      </div>
      <div class="graphcontainer">
        <div class="fixed" id="containerq3" style="width: 50%; height: 400px; margin: 0 auto"></div>
        <div class="flex-item" id="containerq4" style="width: 50%; height: 400px; margin: 0 auto"></div>
      </div>
      <div class="container" style="position:relative;text-align:center;">
      <div class="text-left">
      <h2 style="text-align: center;"><a name="responses">{{ locale.survey_results_responses }}</a></h2>
      {% for r in responses %}
        <div class="card">
          <div class="response">
            <h3> {{ locale.survey_results_response }} {{ r.id }} </h3>
            <p> <b>{{ locale.survey_questions.0 }}</b> <p>{{ r.q1 }}</p> </p>
            <p> <b>{{ locale.survey_questions.1 }}</b> <p>{{ r.q2 }}</p> </p>
            <p> <b>{{ locale.survey_questions.2 }}</b> <p>{{ r.q3 }}</p> </p>
            <p> <b>{{ locale.survey_questions.3 }}</b> <p>{{ r.q4 }}</p> </p>
            <p> <b>{{ locale.survey_questions.4 }}</b> <p>{{ r.q5 }}</p> </p>
          </div>
        </div>
        <br>
      {% endfor %}
      {% for r in responses_upd %}
        <div class="card">
          <div class="response">
            <h3> {{ locale.survey_results_response }} {{ r.id }} </h3>
            <p> <b>{{ locale.survey_questions.5 }}</b> <p>{{ r.q1 }}</p> </p>
            <p> <b>{{ locale.survey_questions.1 }}</b> <p>{{ r.q2 }}</p> </p>
            <p> <b>{{ locale.survey_questions.2 }}</b> <p>{{ r.q3 }}</p> </p>
            <p> <b>{{ locale.survey_questions.3 }}</b> <p>{{ r.q4 }}</p> </p>
            <p> <b>{{ locale.survey_questions.4 }}</b> <p>{{ r.q5 }}</p> </p>
          </div>
        </div>
        <br>
      {% endfor %}
    </div>
    </div>
    </div>
</div>

<script type="text/javascript">
Highcharts.setOptions({
    colors: ['#058DC7', '#50B432', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
});
</script>

<script type="text/javascript">
Highcharts.chart('containerq1', {
    chart: {
        type: 'bar'
    },
    title: {
        text: '{{ locale.survey_questions.0 }}'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: {{ graphs.q1_names|safe }},
        title: {
            text: null
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: '{{ locale.charts_question_1_yAxis }}',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        }
    },
    tooltip: {
        valueSuffix: ' {{ locale.charts_valueSuffix }}'
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 80,
        floating: true,
        borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
        name: '{{ locale.charts_series_name|safe }}',
        data: {{ graphs.q1_values|safe }}
    }]
});
</script>

<script type="text/javascript">
Highcharts.chart('containerq6', {
    chart: {
        type: 'bar'
    },
    title: {
        text: '{{ locale.survey_questions.5 }}'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: {{ graphs.q6_names|safe }},
        title: {
            text: null
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: '{{ locale.charts_question_1_yAxis }}',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        }
    },
    tooltip: {
        valueSuffix: ' {{ locale.charts_valueSuffix }}'
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 80,
        floating: true,
        borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
        name: '{{ locale.charts_series_name|safe }}',
        data: {{ graphs.q6_values|safe }}
    }]
});
</script>

<script type="text/javascript">
Highcharts.chart('containerq2', {
    chart: {
        type: 'bar'
    },
    title: {
        text: '{{ locale.survey_questions.1 }}'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: ['{{ locale.charts_question_2_xAxis }}'],
        title: {
            text: null
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: '{{ locale.charts_question_2_yAxis }}',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        },
        max: 10
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 80,
        floating: true,
        borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
        name: '{{ locale.charts_series_name|safe }}',
        data: {{ graphs.q2|safe }}
    }]
});
    </script>

<script type="text/javascript">
$(document).ready(function () {
    Highcharts.chart('containerq3', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: '{{ locale.survey_questions.2|safe }}'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                },
                showInLegend: true
            }
        },
        series: [{
            name: '{{ locale.charts_valueSuffix }}',
            colorByPoint: true,
            data: {{ graphs.q3|safe }}
        }]
    });
});
</script>

<script type="text/javascript">
$(document).ready(function () {
    Highcharts.chart('containerq4', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: '{{ locale.survey_questions.3|safe }}'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            name: '{{ locale.charts_valueSuffix }}',
            colorByPoint: true,
            data: {{ graphs.q4|safe }}
        }]
    });
});
</script>
{% endblock %}

